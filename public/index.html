<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Security Monitor</title>
    <style>
        body {
            background-color: #111;
            color: white;
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }

        /* The Status Box */
        #monitor-screen {
            width: 80%;
            max-width: 500px;
            height: 350px;
            background-color: #222;
            border: 8px solid #444;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            font-weight: bold;
            overflow: hidden;
            position: relative;
        }

        img { width: 100%; height: 100%; object-fit: cover; }

        /* SAFE MODE */
        .safe {
            border-color: #2ecc71 !important;
            color: #2ecc71;
            box-shadow: 0 0 20px rgba(46, 204, 113, 0.2);
        }

        /* DANGER MODE */
        .danger {
            border-color: #ff0000 !important;
            background-color: #300000;
            color: #ff0000;
            animation: siren 0.8s infinite alternate;
        }

        /* Blinking Animation */
        @keyframes siren {
            from { box-shadow: 0 0 10px red; }
            to { box-shadow: 0 0 50px red; }
        }

        .status-text { margin-top: 20px; font-size: 20px; color: #888; }
    </style>
</head>
<body>
    
        <h1>SEDSS</h1>
        <h1>üõ∞Ô∏è Live Security Feed</h1>

    <div id="monitor-screen" class="safe">
        Waiting for signal...
    </div>

    <div class="status-text" id="log">Connecting...</div>

    <script>
        const screen = document.getElementById('monitor-screen');
        const log = document.getElementById('log');

        // --- THE POLLING LOOP (The "Walkie Talkie") ---
        
        // This function runs every 2.5 seconds (2500 ms)
        setInterval(async () => {
            try {
                // 1. Ask the server: "What is the status?"
                const response = await fetch('/status');
                const data = await response.json();

                // 2. Update the Screen based on the answer
                if (data.status === "DANGER") {
                    
                    // SHOW RED ALERT
                    screen.className = "danger";
                    screen.innerHTML = `<img src="${data.image}" />`;
                    log.innerText = "‚ö†Ô∏è THREAT DETECTED!";
                    
                } else {
                    
                    // SHOW SAFE GREEN
                    screen.className = "safe";
                    screen.innerHTML = "‚úÖ SAFE"; 
                    log.innerText = "Scanning area...";
                }

            } catch (error) {
                log.innerText = "Lost connection to server...";
            }
        }, 2500); // <--- Change this number to make it faster or slower
    </script>

</body>
</html>